# Sprite tmux configuration
# This config disables all tmux commands except detach (Ctrl-b, d) and allows focus and mouse scrolling

# Enable mouse support for scrolling and focus
set -g mouse on

# Set terminal overrides for better mouse support
set -ga terminal-overrides ',*:Ss=\E[%p1%d q:Se=\E[2 q'

# Disable all key bindings by unbinding everything
unbind-key -a

# Also unbind all keys in copy mode
unbind-key -a -T copy-mode
unbind-key -a -T copy-mode-vi

# Set the prefix key to Ctrl-b
set -g prefix C-b

# Only allow detach and copy
bind-key d detach-client
bind-key -T copy-mode-vi y send -X copy-pipe-and-cancel "tmux show-buffer | tmux run 'printf \"\033]52;c;$(base64 | tr -d \"\n\")\a\"'"
# Exit copy mode and copy to clipboard when mouse drag ends
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "tmux show-buffer | tmux run 'printf \"\033]52;c;$(base64 | tr -d \"\n\")\a\"'"
# Allow Escape to exit copy mode
bind-key -T copy-mode-vi Escape send-keys -X cancel


# Disable status bar
set -g status off

# Enable focus events
set -g focus-events on

# Terminal settings for better compatibility
set -g default-terminal "screen-256color"
set -ga terminal-overrides ',xterm-256color:Tc'

# Window and pane settings
set -g base-index 1
set -g pane-base-index 1
set -g renumber-windows on

# Disable bells
set -g bell-action none
set -g visual-bell off

# Disable escape time delay
set -sg escape-time 0

# Keep windows and panes alive when the program exits
set -g remain-on-exit off

# Disable automatic renaming
set -g automatic-rename off
set -g allow-rename off

# Set title
set -g set-titles on
set -g set-titles-string "Sprite Exec Session #S"
