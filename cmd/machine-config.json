{
  "guest": {
    "cpu_kind": "shared",
    "cpus": 4,
    "memory_mb": 4096,
    "kernel_args": ["cgroup_enable=memory", "io cgroup_no_v1=all", "systemd.unified_cgroup_hierarchy=1"]
  },
  "mounts": [
    {
    "volume": "<volume_id>",
      "path": "/dev/fly_vol"
    }
  ],
  "metadata": {
    "sprite-version": "0.0.1"
  },
  "image": "<image_ref>", 
  "containers": [
    {
      "name": "sprite",
      "image": "<image_ref>",
      "env": {
        "SPRITE_HTTP_API_TOKEN": "f0e4c2f76c58916ec258f246851bea091d14d4247a2fc3e18694461b1816e13b",
        "SPRITE_KEEP_ALIVE_ON_ERROR": "true",
        "SPRITE_PRIMARY_REGION": "ord"
      },
      "secrets": [
        {
          "name": "SPRITE_S3_ACCESS_KEY",
          "env_var": "SPRITE_S3_ACCESS_KEY"
        },
        {
          "name": "SPRITE_S3_SECRET_ACCESS_KEY",
          "env_var": "SPRITE_S3_SECRET_ACCESS_KEY"
        },
        {
          "name": "SPRITE_S3_BUCKET",
          "env_var": "SPRITE_S3_BUCKET"
        },
        {
          "name": "SPRITE_S3_ENDPOINT_URL",
          "env_var": "SPRITE_S3_ENDPOINT_URL"
        },
        {
          "name": "SPRITE_S3_REGION",
          "env_var": "SPRITE_S3_REGION"
        }
      ],
      "files":[{
        "guest_path": "/etc/app-image.json",
        "image_config": "ghcr.io/superfly/sprite-ubuntu:25.04-0395d5a"
      }
      ],
      "mounts": [
        {
          "name": "shared",
          "path": "/data"
        },
        {
          "name": "system-base",
          "path": "/mnt/system-base"
        },
        {
          "name": "languages-image",
          "path": "/mnt/languages-image"
        }
      ],
      "restart": {
        "policy": "no"
      }
    }
  ],
  "services": [
    {
      "protocol": "tcp",
      "internal_port": 7778,
      "ports": [
        {
          "port": 80,
          "handlers": [
            "http"
          ]
        },
        {
          "port": 443,
          "handlers": [
            "http",
            "tls"
          ]
        }
      ],
      "force_instance_key": null
    }
  ],
  "restart": {
    "policy": "no"
  },
  "stop_config": {
    "timeout": "300s",
    "signal": "SIGINT"
  },
  "volumes": [
    {
      "name": "shared",
      "temp_dir": {
        "size_mb": 100,
        "storage_type": "memory"
      }
    },
    {
      "name": "languages-image",
      "image": "ghcr.io/superfly/sprite-ubuntu:25.04-0395d5a-languages"
    },
    {
      "name": "system-base",
      "image": "ghcr.io/superfly/sprite-ubuntu:25.04-0395d5a"
    }
  ]
}
