{
  "init": {},
  "guest": {
    "cpu_kind": "shared",
    "cpus": 8,
    "memory_mb": 4096,
    "kernel_args": [
      "cgroup_no_v1=all",
      "systemd.unified_cgroup_hierarchy=1"
    ]
  },
  "metadata": {
    "sprite_config_version": "aa0774c40aaf0224bc69df451997c5f80fe64e590608d696a6d3693158bac768"
  },
  "mounts": [
    {
      "encrypted": true,
      "path": "/dev/fly_vol",
      "size_gb": 10,
      "volume": "<volume_id>",
      "name": "data"
    }
  ],
  "services": [
    {
      "protocol": "tcp",
      "internal_port": 7778,
      "autostop": false,
      "autostart": true,
      "ports": [
        {
          "port": 80,
          "handlers": [
            "http"
          ]
        },
        {
          "port": 443,
          "handlers": [
            "http",
            "tls"
          ]
        }
      ],
      "force_instance_key": null
    }
  ],
  "image": "<image_ref>",
  "restart": {
    "policy": "on-failure",
    "max_retries": 3
  },
  "stop_config": {
    "timeout": "5m0s",
    "signal": "SIGINT"
  },
  "containers": [
    {
      "name": "sprite",
      "image": "<image_ref>",
      "env": {
        "SPRITE_HTTP_API_TOKEN": "<sprite_token>",
        "SPRITE_PRIMARY_REGION": "iad",
        "SPRITE_S3_REGION": "auto",
        "SPRITE_ADMIN_CHANNEL": "wss://sprites-api-staging.fly.dev/internal/admin",
        "WAIT_FOR_BOOT": "true"
      },
      "secrets": [
        {
          "env_var": "SPRITE_S3_ACCESS_KEY",
          "name": "SPRITE_S3_ACCESS_KEY"
        },
        {
          "env_var": "SPRITE_S3_SECRET_ACCESS_KEY",
          "name": "SPRITE_S3_SECRET_ACCESS_KEY"
        },
        {
          "env_var": "SPRITE_S3_BUCKET",
          "name": "SPRITE_S3_BUCKET"
        },
        {
          "env_var": "SPRITE_S3_ENDPOINT_URL",
          "name": "SPRITE_S3_ENDPOINT_URL"
        }
      ],
      "files": [
        {
          "guest_path": "/etc/app-image.json",
          "image_config": "ghcr.io/superfly/sprite-ubuntu:25.04-0.0.1-pre10"
        }
      ],
      "restart": {
        "policy": "no"
      },
      "mounts": [
        {
          "name": "shared",
          "path": "/data"
        },
        {
          "name": "system-base",
          "path": "/mnt/system-base"
        },
        {
          "name": "languages-image",
          "path": "/mnt/languages-image"
        }
      ]
    }
  ],
  "volumes": [
    {
      "name": "shared",
      "temp_dir": {
        "storage_type": "memory",
        "size_mb": 100
      }
    },
    {
      "name": "languages-image",
      "image": "ghcr.io/superfly/sprite-ubuntu:25.04-0.0.1-pre10-languages"
    },
    {
      "name": "system-base",
      "image": "ghcr.io/superfly/sprite-ubuntu:25.04-0.0.1-pre10"
    }
  ]
}